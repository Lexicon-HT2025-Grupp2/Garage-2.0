@model Garage_2._0.Models.UserDetailsVM
<a asp-action="Index" class="btn btn-sm btn-secondary mb-3" title="Back to users">
    <i class="bi bi-arrow-left"></i> Back to users
</a>
<h2>@Model.User.FirstName @Model.User.LastName</h2>

<div class="d-flex align-items-center gap-2 mb-3">
    <p class="mb-0"><strong>Role:</strong> @Model.Role</p>

    @if (Model.Role == "Member")
    {
        <form asp-action="PromoteToAdmin" method="post" class="mb-0">
            <input type="hidden" name="memberId" value="@Model.User.Id" />
            <button class="btn btn-sm btn-primary">
                Promote to Admin
            </button>
        </form>
    }
    else if (Model.Role == "Admin")
    {
        <form asp-action="DemoteToMember" method="post" class="mb-0">
            <input type="hidden" name="memberId" value="@Model.User.Id" />
            <button class="btn btn-sm btn-secondary">
                Demote to Member
            </button>
        </form>
    }
</div>
<p><strong>Personnummer:</strong> @Model.User.Personnummer</p>
<p><strong>Total cost:</strong> @Model.TotalCost.ToString("F2") kr</p>

<h3>Registered vehicles</h3>

<table class="table table-bordered">
    <thead>
        <tr>
            <th>Registration number</th>
            <th>Type</th>
            <th>Color</th>
            <th>Model</th>
            <th>Arrival time</th>
            <th>Total cost</th>
        </tr>
    </thead>
    <tbody>
        @foreach (var v in Model.Vehicles)
        {
            <tr>
                <td>@v.RegistrationNumber</td>
                <td>@v.VehicleType?.Name</td>
                <td>@v.Color</td>
                <td>@v.Model</td>
                <td>@v.ArrivalTime</td>
                <td>@($"{Math.Round((DateTime.Now - v.ArrivalTime).TotalHours * 10, 2):F2} kr")</td>
                <td>
                    <a asp-controller="Vehicles"
                       asp-action="Details"
                       asp-route-id="@v.Id"
                       asp-route-returnUrl="@Context.Request.Path"
                       class="btn btn-sm btn-info" title="View Details">
                        <i class="bi bi-eye"></i>
                    </a>

                    <a asp-controller="Vehicles"
                       asp-action="Edit"
                       asp-route-id="@v.Id"
                       asp-route-returnUrl="@Context.Request.Path"
                       class="btn btn-sm btn-warning" title="Edit">
                        <i class="bi bi-pencil"></i>
                    </a>

                    <a asp-controller="Vehicles"
                       asp-action="Delete"
                       asp-route-id="@v.Id"
                       asp-route-returnUrl="@Context.Request.Path"
                       class="btn btn-sm btn-danger" title="Delete">
                        <i class="bi bi-box-arrow-right"></i>
                    </a>

                </td>
            </tr>
        }
    </tbody>
</table>